# 第7章 面向对象编程（基础部分）
## 7.1 类与对象
* 数组处理问题：
  * 数据类型体现不出来
  * 只能通过[下标]获取信息，造成变量名字和内容的对应关系不明确
  * 不能体现猫的行为
* [对象实例猫类](Object01.java)
* 从类到对象的几种说法：
  1. 创建一个对象
  2. 实例化一个对象
  3. 把类实例化
* 类与对象的区别
  1) 类是抽象的，概念的，代表一类事物,比如人类,猫类.., 即它是数据类型. 
  2) 对象是具体的，实际的，代表一个具体事物, 即 是实例.
  3) 类是对象的模板，对象是类的一个个体，对应一个实例
* 对象在内存中存在形式(重要)，必须搞清楚，脑海中要有对应的图形。

## 7.2 成员方法
* **方法的调用机制原理**
* 方法不能嵌套定义。
* 成员方法的好处
  1. 提高代码的复用性
  2. 可以将实现的细节封装起来，然后供其他用户来调用即可
### 返回数据类型
1) 一个方法最多有一个返回值[如何返回多个结果 返回数组]
2) 返回类型可以为任意类型，包含基本类型或引用类型(数组，对象)
3) 如果方法要求有返回数据类型，则方法体中最后的执行语句必须为return值;而且要求返回值类型必须和return的值类型一致或兼容
4) 如果方法是void，则方法体中可以没有return语句，或者只写return;

### 方法名
* 遵循驼峰命名法，最好见名知义，表达出该功能的意思即可, 比如得到两个数的和getSum, 开发中按照规范。

### 方法调用细节说明
1. 同一个类中的方法调用：直接调用即可。
2. 跨类中的方法A类调用B类方法：需要通过对象名调用。

### 成员方法练习题
[MethodExercise01.java](MethodExercise01.java)
1) 编写类AA，有一个方法:判断一个数是奇数odd还是偶数,返回boolean
2) 根据行、列、字符打印对应行数和列数的字符，比如:行:4，列:4，字符#,则打印相应的效果
## 7.3 成员方法传参机制（非常非常重要）
* 基本数据类型，传递的是值（值拷贝），形参的任何改变不影响实参。
* 引用类型传递的是地址（传递也是值，但是值是地址），可以通过形参影响实参！
### 成员方法传参机制练习题
[MethodExercise02.java](MethodExercise02.java)
1) 编写类MyTools类，编写一个方法可以打印二维数组的数据。
2) 编写一个方法copyPerson，可以复制一个Person对象，返回复制的对象。克隆对象，注意要求得到新对象和原来的
  对象是两个独立的对象，只是他们的属性相同

## 7.4 方法递归调用（非常非常重要）
* 递归就是方法自己调用自己。
* 递归重要规则
  1. 执行一个方法时，就创建一个新的受保护的独立空间（栈空间）。
  2. 每一个栈都会完整的执行方法，在哪里调用就在哪里返回。
  3. 递归必须向退出递归的条件逼近，否则就是无限递归。
  4. 方法的局部变量是独立的，不会相互影响。
  5. 如果方法中使用的是引用类型变量（比如数组，对象），就会共享该引用类型的数据。
  6. 当一个方法执行完毕，或者遇到`return`，就会返回，遵守谁调用，就将结果返回给谁，同时当方法执行完毕或者返回时，该方法就执行完毕。
* 重要的知道在调用递归时的内存情况，可以画图进行分析：
  * [打印与阶乘问题](Recursion01.java)   
  * [斐波那契数与猴子吃桃子问题](RecursionExercise01.java)
* 用递归的思想解决一些实际问题：
  * [迷宫问题](MiGong.java)
  * [汉诺塔](HanoiTower.java)
  * [八皇后问题](EightQueens.java)(代码需要更新，还有错误，未完成)

## 7.5 方法重载
* java中允许同一个类中，多个同名方法的存在，但要求**形参列表**不一致!
* 注意事项及细节：
  1. 方法名：必须相同
  2. 形参列表：必须不同（形参类型或个数或顺序，至少有一样不同，参数名无要求）
  3. **返回类型：无要求**
* [方法重载练习代码](OverLoadExercise.java)

## 7.6 可变参数
* Java允许将**同一个类中多个同名同功能但参数个数不同的方法**，封装成一个方法，通过可变参数实现。
* 基本语法：
```
访问修饰符 返回类型 方法名(数据类型... 形参名){
  方法体
}
```
* 可变参数实例:[计算多个数的和](VarParameter01.java)
* 注意事项和细节：
  1. 可变参数的实参可以为0个或任意多个；
  2. 可变参数的实参可以为数组；
  3. 可变参数的本质就是数组；
  4. **可变参数可以和普通类型的参数一起放在形参列表，但必须保证可变参数在最后**；
  5. 一个形参列表只能出现一个可变参数。
* [可变参数练习代码](VarParameterExercise.java)：有三个方法，分别实现返回姓名和两门课成绩(总分)， 返回姓名和三门课成绩(总分)，返回姓名和五门课成绩(总分)。 封装成一个可变参数的方法。

## 7.7 作用域
* 在java编程中，主要的变量就是属性（成员变量）和局部变量。
* 我们说的局部变量一般是指在成员方法中定义的变量。
* java中作用域的分类：
  * 全局变量：也就是属性，作用域为整个类体。
  * 局部变量：也就是除了属性之外的其他变量，作用域为定义它的代码块中！
* **全局变量（属性）可以不赋值，直接使用，因为有默认值，局部变量必须赋值后，才能使用，因为没有默认值。**
* 注意事项和细节使用（**这些规则需要记住**）
  1. 属性和局部变量可以重名，访问时遵循就近原则。
  2. 在同一个作用域中，比如在同一个成员方法中，两个局部变量，不能重名。
  3. **属性生命周期较长**，伴随着对象的创建而创建，伴随着对象的销毁而销毁。**局部变量生命周期较短**，伴随着它的代码块执行而创建，伴随着代码块的结束而销毁，即在一次方法调用过程中。
  4. 作用域范围不同
     * 全局变量/属性：可以被本类使用，或其他类使用（通过对象调用）
     * 局部变量：只能在本类中对应的方法中使用
  5. 修饰符不同
     * 全局变量/属性可以加修饰符
     * **局部变量不可以加修饰符**  

## 7.8 构造方法/构造器
* 基本语法
```
[修饰符] 方法名(形参列表){ 
  方法体;
}
```
* 说明：
  1) 构造器的修饰符可以默认，也可以是public、protected、private 
  2) **构造器没有返回值**
  3) **方法名和类名字必须一样**
  4) 参数列表和成员方法一样的规则
  5) 构造器的调用, 由系统完成
* 构造方法又叫构造器(constructor)，是类的一种特殊的方法，它的主要作用是**完成对新对象的初始化**。它有几个特点:
  1) 方法名和类名相同
  2) 没有返回值
  3) 在创建对象时，系统会自动的调用该类的构造器完成对象的初始化。
* 注意事项和使用细节([构造器实例代码](ConstructorDetail.java))
  1. 一个类可以定义多个不同的构造器，即构造器重载
  2. 构造器名和类名要相同
  3. 构造器没有返回值
  4. 构造器是完成对象的初始化，并不是创建对象
  5. 在创建对象时，系统自动的调用该类的构造方法
  6. 如果程序员没有定义构造器，系统会自动给类生成一个默认无参构造器（也叫默认构造器），比如`Dog(){}`，可以使用`javap`指令反编译查看
  7. 一旦定义了自己的构造器，默认的构造器就覆盖了，就不能再使用默认的无参构造器，除非显式的定义一下，即`Dog(){}`。（**这点很重要**） 
* [构造器练习代码](ConstructorExercise.java)：
  * 在前面定义的 Person 类中添加两个构造器: 第一个无参构造器:利用构造器设置所有人的 age 属性初始值都为18。
  * 第二个带pName和pAge两个参数的构造器:使得每次创建Person对象的同时初始化对象的age属性值和name属性值。 
  * 分别使用不同的构造器，创建对象。

## 7.9 对象创建的流程分析
```java
class Person{//类Person
  int age = 90;
  String name;
  Person(String n, int a) {//构造器
    name = n;//给属性赋值
    age = a;//...
  }
}
Person p = new Person("小倩",20);
```
* **流程分析**（面试题）
  1.  加载`Person`类信息（`Person.class`），只会加载一次
  2.  在堆中分配空间（地址）
  3.  完成对象初始化
      1.  默认初始化`age = 0, name = null`
      2.  显式初始化`age = 90, name = null`
      3.  构造器初始化`age = 20, name = 小倩`
  4. 把对象在堆中的地址返回给p（p是对象名，也可以理解成是对象的引用）

## 7.10 this关键字
### this的注意事项和使用细节
1) `this`关键字可以用来访问本类的属性、方法、构造器 
2) `this`用于区分当前类的属性和局部变量
3) 访问成员方法的语法:`this.方法名(参数列表)`;
4) 访问构造器语法:`this(参数列表); `注意只能在构造器中使用(**即只能在构造器中访问另外一个构造器, 必须放在第一条语句**)
5) `this`不能在类定义的外部使用，只能在类定义的方法中使用。
* 哪个对象调用，`this`就代表哪个对象
* `this.hashCode()`可以返回一个整数，可以看作是地址，但严格来说不是实际的地址。
### this关键字练习
定义 `Person` 类，里面有 `name`、`age` 属性，并提供 `compareTo` 比较方法，用于判断是否和另一个人相等，提供测试类 `TestPerson` 用于测试, 名字和年龄完全一样，就返回 `true`, 否则返回 `false`
* [this关键字练习代码](TestPerson.java)
* 注意：判断字符串是否相等时用`str1.equals(str2)`

## 本章作业
1. 编写类A01,定义方法max，实现求某个double数组的最大值，并返回.[Homework01.java](Homework01.java)
  * 为了增强代码的健壮性，这里需要考虑一些情况，需要保证给的数组不能为`null`并且至少有一个元素，这样再找数组的最大值。在写方法时，可以返回一个`Double`包装类，不满足情况返回`null`。
  ```java
  public Double max(double[] nums) {
		if(nums != null && nums.length > 0) {
			...
		} else {
		  return null;
	  }
  }
  ```
2. 编写类A02,定义方法find，实现查找某字符串是否在字符串数组中，并返回索引，如果找不到，返回-1.[Homework02.java](Homework02.java)
3. 编写类Book,定义方法updatePrice，实现更改某本书的价格，具体：如果价格>150，则更改为150，如果价格>100，更改为100，否则不变。[Homework03.java](Homework03.java)
  * 显示书籍信息时，可以在类中写一个方法。
  ```java
  public void info() {
		System.out.println("【书籍信息】 书名：" + name + " 价格：" + price);
	}
  ```
4. 编写类A03,实现数组的复制功能copyArr，输入旧数组，返回一个新数组，元素和旧数组一样。[Homework04.java](Homework04.java)
5. 定义一个圆类Circle，定义属性：半径，提供显示圆周长功能的方法，提供显示圆面积的方法。[Homework05.java](Homework05.java)
   * 使用圆周率用`Math.PI`。 
6. 编程创建一个Cale计算类，在其中定义2个变量表示两个操作数，定义四个方法实现求和、差、乘、商（要求除数为0的话，要提示）并创建两个对象，分别测试。[Homework06.java](Homework06.java)
  * 注意对除数不为0的处理，方法类似于作业1，用封装类`Double`。
  ```java
  public Double divide() {
		if(op2 == 0) {
			System.out.println("除数不能为0！");
			return null;
		} else {
			return op1 / op2;
		}
	}
  ```
7. 设计一个Dog类，有名字、颜色和年龄属性，定义输出方法show()显示其信息。并创建对象，进行测试。【提示this.属性】[Homework07.java](Homework07.java)
8. 给定一个Java程序代码[Test.java](Test.java)，则编译运行后，输出的结果是多少？
   * 输出结果为10, 9, 10
   * 注意表达式`count++`，先取表达式的值为`count` ，再执行+1操作。
   * `new Test()`是匿名对象，匿名对象使用后，就不能使用。
9.  定义Music类，里面有音乐名name、音乐时长times属性，并有播放play功能和返回本身属性信息的功能getInfo.[Homework09.java](Homework09.java)
10. 试写出以下代码的运行结果。[Homework10.java](Homework10.java)
    * 输出结果为101, 100, 101, 101 
11. 在测试方法中，调用method方法，代码如下，编译正确，试写出method方法的定义形式，调用语句为：`System.out.println(method(method(10.0,20.0),100));`。 [Homework11.java](Homework11.java)
12. 创建一个Employee类，属性有（名字，性别，年龄，职位，薪水），提供3个构造方法，可以初始化
    1.  （名字，性别，年龄，职位，薪水）
    2.  （名字，性别，年龄）
    3.  （职位，薪水）
要求充分复用构造器。[Homework12.java](Homework12.java)
  * 性别可以用`char`类型，`char gender;`。
13. 将对象作为参数传递给方法。[Homework13.java](Homework13.java)
    题目要求：
    1. 定义一个Circle类，包含一个double型的radius属性代表圆的半径，findArea()方法返回圆的面积。
    2. 定义一个类PassObject，在类中定义一个方法printAreas()，该方法的定义如下：public void printAreas(Circle c, int times)
    3. 在printAreas方法中打印输出1到times之间的每个整数半径值，以及对应的面积。例如，times为5，则输出半径1,2,3,4,5,以及对应的圆面积。
    4. 在main方法中调用printAreas()方法，调用完毕后输出当前半径值。
  * 修改半径的值时，可以在Circle类中加一个方法，后面再调用该方法。
  ```java
  //修改radius值
	public void setRadius(double radius) {
		this.radius = radius;
	}
  ```
14.  扩展题。[Homework14.java](Homework14.java)
有个人Tom设计他的成员变量.成员方法，可以电脑猜拳。电脑每次都会随机生成0，1，2。0表示石头，1表示剪刀，2表示布，并要可以显示Tom的输赢次数（清单）。
 * 生成随机数0-2：`(int)(Math.random() * 3)`