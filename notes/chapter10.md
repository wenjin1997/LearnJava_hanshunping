- [第10章 面向对象编程（高级部分）](#第10章-面向对象编程高级部分)
  - [10.1 类变量和类方法](#101-类变量和类方法)
    - [类变量快速入门](#类变量快速入门)
    - [类变量的内存布局](#类变量的内存布局)
    - [类变量](#类变量)
    - [类变量使用注意事项和细节讨论](#类变量使用注意事项和细节讨论)
    - [类方法](#类方法)
    - [⭐️类方法使用注意事项和细节讨论](#️类方法使用注意事项和细节讨论)

# 第10章 面向对象编程（高级部分）
## 10.1 类变量和类方法
### 类变量快速入门
提出问题：有一群小孩在玩堆雪人,不时有新的小孩加入,请问如何知道现在共有多少人在玩?，编写程序解决。[ChildGame.java](/code/chapter10/src/com/jinjin/static_/ChildGame.java)

在类Child中定义一个类变量，统计有多少小孩加入了游戏。
```java
//类变量count，统计有多少小孩加入游戏
public static int count = 0;
```

### 类变量的内存布局
<img src="/notes/img-ch10/static.png">

* 静态变量具体存放在哪里与JDK版本有关系，JDK7以上的版本，存放在class对象中，JDK7之前存放在静态域中。
* 不管static变量存放在哪里，有以下两点共识：
  1. static变量是同一个类所有对象共享。
  2. static类变量，在类加载的时候就生成了。

### 类变量
* **什么是类变量**：类变量也叫静态变量/静态属性，是该类的所有对象共享的变量，任何一个该类的对象去访问它时，取到的都是相同的值，同样任何一个该类的对象去修改它时，修改的也是同一个变量。
* **如何定义类变量**
    ```java
    访问修饰符 static 数据类型 变量名; //推荐
    static 访问修饰符 数据类型 变量名;
    ```
* **如何访问类变量** [VisitStatic.java](/code/chapter10/src/com/jinjin/static_/VisitStatic.java)
    ```java
    类名.类变量名 //推荐
    对象名.类变量名
    ```
    * 静态变量的访问修饰符的访问权限和范围和普通属性是一样的。
    * 类变量是随着类的加载而创建，所以即使没有创建对象实例也可以访问。

### 类变量使用注意事项和细节讨论
1. 什么时候需要用类变量
    当我们需要让某个类的所有对象都共享一个变量时，就可以考虑类变量（静态变量）。比如：定义学生类，统计所有学生共交多少钱。
2. 类变量与实例变量（普通属性）区别
    类变量是该类的所有对象共享的，而实例变量是每个对象独享的。
3. 加上static称为类变量或静态变量，否则称为实例变量/普通变量/非静态变量。
4. 类变量可以通过`类名.类变量名`或者`对象名.类变量名`来访问，但java设计者推荐我们使用`类名.类变量名`方式访问。【**前提是**满足访问修饰符的权限和范围】
5. 实例变量不能通过`类名.类变量名`方式访问。
6. 类变量是在类加载时就初始化了，也就是说，即使你没有创建对象，只要类加载了，就可以使用类变量了。
7. 类变量的生命周期是随类的加载开始，随着类消亡而销毁。

### 类方法
* 类方法基本介绍
类方法也叫静态方法。形式如下：
    ```java
    访问修饰符 static 数据返回类型 方法名() { } //推荐
    static 访问修饰符 数据返回类型 方法名() { } 
    ```
* 类方法的调用
使用方式：`类名.类方法名`或者`对象名.类方法名`，前提是满足访问修饰符的访问权限和范围。

* 类方法经典的使用场景
当方法中不涉及到任何和对象相关的成员，则可以将方法设计成静态方法，提高开发效率。比如：工具类中的方法utils、Math类、Arrays类、Collections集合类。  
在程序的实际开发中，往往会将一些通用的方法设计成静态方法，这样我们不需要创建对象就可以使用了，比如打印一维数组，冒泡排序，完成某个计算任务等。

### ⭐️类方法使用注意事项和细节讨论
1. 类方法和普通方法都是随着类的加载而加载，将结构信息存储在方法区：类方法中无this的参数、普通方法中隐含着this的参数。
2. 类方法可以通过类名调用，也可以通过对象名调用。
3. 普通方法和对象有关，需要通过对象名调用，比如`对象名.方法名(参数)`，不能通过类名调用。
4. 类方法中不允许使用和对象有关的关键字，比如`this`和`super`。普通方法（成员方法）可以。
5. 类方法（静态方法）中只能访问静态变量或静态方法。
6. 普通成员方法，既可以访问非静态成员，也可以访问静态成员。

⭐️**小结**：
1. 静态方法，只能访问静态的成员；
2. 非静态的方法，可以访问所有成员；
3. 在编写代码时，仍然要遵守访问权限规则。
