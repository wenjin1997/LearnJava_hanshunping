- [ç¬¬14ç«  é›†åˆ](#ç¬¬14ç« -é›†åˆ)
  - [é›†åˆçš„ç†è§£å’Œå¥½å¤„](#é›†åˆçš„ç†è§£å’Œå¥½å¤„)
    - [æ•°ç»„](#æ•°ç»„)
    - [é›†åˆ](#é›†åˆ)
  - [ğŸš©é›†åˆçš„æ¡†æ¶ä½“ç³»](#é›†åˆçš„æ¡†æ¶ä½“ç³»)
  - [Collectionæ¥å£å’Œå¸¸ç”¨æ–¹æ³•](#collectionæ¥å£å’Œå¸¸ç”¨æ–¹æ³•)
    - [Collectionæ¥å£å®ç°ç±»çš„ç‰¹ç‚¹](#collectionæ¥å£å®ç°ç±»çš„ç‰¹ç‚¹)
    - [`Collection`æ¥å£éå†å…ƒç´ æ–¹å¼1-ä½¿ç”¨`Iterator`ï¼ˆè¿­ä»£å™¨ï¼‰](#collectionæ¥å£éå†å…ƒç´ æ–¹å¼1-ä½¿ç”¨iteratorè¿­ä»£å™¨)
    - [`Collection`æ¥å£éå†å¯¹è±¡æ–¹å¼2-å¢å¼º`for`å¾ªç¯](#collectionæ¥å£éå†å¯¹è±¡æ–¹å¼2-å¢å¼ºforå¾ªç¯)
    - [è¯¾å ‚ç»ƒä¹ ](#è¯¾å ‚ç»ƒä¹ )
  - [`List`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•](#listæ¥å£å’Œå¸¸ç”¨æ–¹æ³•)
    - [`List`æ¥å£åŸºæœ¬ä»‹ç»](#listæ¥å£åŸºæœ¬ä»‹ç»)
    - [`List`æ¥å£çš„å¸¸ç”¨æ–¹æ³•](#listæ¥å£çš„å¸¸ç”¨æ–¹æ³•)
    - [`List`æ¥å£è¯¾å ‚ç»ƒä¹ ](#listæ¥å£è¯¾å ‚ç»ƒä¹ )
    - [`List`çš„ä¸‰ç§éå†æ–¹å¼ï¼ˆ`ArrayList`ã€`LinkedList`ã€`Vector`ï¼‰](#listçš„ä¸‰ç§éå†æ–¹å¼arraylistlinkedlistvector)
    - [å®ç°ç±»çš„è¯¾å ‚ç»ƒä¹ 2](#å®ç°ç±»çš„è¯¾å ‚ç»ƒä¹ 2)
  - [`ArrayList`åº•å±‚ç»“æ„å’Œæºç åˆ†æ](#arrayliståº•å±‚ç»“æ„å’Œæºç åˆ†æ)
    - [`ArrayList`çš„æ³¨æ„äº‹é¡¹](#arraylistçš„æ³¨æ„äº‹é¡¹)
    - [ğŸš©ğŸš©ğŸš©`ArrayList`çš„åº•å±‚æ“ä½œæœºåˆ¶æºç åˆ†æ](#arraylistçš„åº•å±‚æ“ä½œæœºåˆ¶æºç åˆ†æ)
    - [é…ç½®IDEA-æ›´æ”¹JDKç‰ˆæœ¬](#é…ç½®idea-æ›´æ”¹jdkç‰ˆæœ¬)
  - [`Vector`åº•å±‚ç»“æ„å’Œæºç å‰–æ](#vectoråº•å±‚ç»“æ„å’Œæºç å‰–æ)
    - [`Vector`çš„åŸºæœ¬ä»‹ç»](#vectorçš„åŸºæœ¬ä»‹ç»)
    - [`Vector`å’Œ`ArrayList`çš„æ¯”è¾ƒ](#vectorå’Œarraylistçš„æ¯”è¾ƒ)
  - [`LinkedList`åº•å±‚ç»“æ„](#linkedliståº•å±‚ç»“æ„)
    - [`LinkedList`çš„å…¨é¢è¯´æ˜](#linkedlistçš„å…¨é¢è¯´æ˜)
    - [`LinkedList`çš„åº•å±‚æ“ä½œæœºåˆ¶](#linkedlistçš„åº•å±‚æ“ä½œæœºåˆ¶)
    - [`LinkedList`çš„å¢åˆ æ”¹æŸ¥æ¡ˆä¾‹](#linkedlistçš„å¢åˆ æ”¹æŸ¥æ¡ˆä¾‹)
  - [`ArrayList`å’Œ`LinkedList`æ¯”è¾ƒ](#arraylistå’Œlinkedlistæ¯”è¾ƒ)
    - [`ArrayList`å’Œ`LinkedList`çš„æ¯”è¾ƒ](#arraylistå’Œlinkedlistçš„æ¯”è¾ƒ)
  - [`Set`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•](#setæ¥å£å’Œå¸¸ç”¨æ–¹æ³•)
    - [`Set`æ¥å£åŸºæœ¬ä»‹ç»](#setæ¥å£åŸºæœ¬ä»‹ç»)
    - [`Set`æ¥å£çš„å¸¸ç”¨æ–¹æ³•](#setæ¥å£çš„å¸¸ç”¨æ–¹æ³•)
    - [`Set`æ¥å£çš„éå†æ–¹å¼](#setæ¥å£çš„éå†æ–¹å¼)
    - [`Set`æ¥å£çš„å¸¸ç”¨æ–¹æ³•ä¸¾ä¾‹](#setæ¥å£çš„å¸¸ç”¨æ–¹æ³•ä¸¾ä¾‹)
  - [`Set`æ¥å£å®ç°ç±»â€”â€”`HashSet`](#setæ¥å£å®ç°ç±»hashset)
    - [`HashSet`çš„å…¨é¢è¯´æ˜](#hashsetçš„å…¨é¢è¯´æ˜)
    - [`HashSet`æ¡ˆä¾‹](#hashsetæ¡ˆä¾‹)
    - [`HashSet`åº•å±‚æœºåˆ¶è¯´æ˜](#hashsetåº•å±‚æœºåˆ¶è¯´æ˜)
    - [`HashSet`è¯¾å ‚ç»ƒä¹ 1](#hashsetè¯¾å ‚ç»ƒä¹ 1)
    - [`HashSet`è¯¾å ‚ç»ƒä¹ 2](#hashsetè¯¾å ‚ç»ƒä¹ 2)
  - [`Set`æ¥å£å®ç°ç±»-`LinkedHashSet`](#setæ¥å£å®ç°ç±»-linkedhashset)
    - [`LinkedHashSet`çš„å…¨é¢è¯´æ˜](#linkedhashsetçš„å…¨é¢è¯´æ˜)
    - [`LinkedHashSet`è¯¾åç»ƒä¹ é¢˜](#linkedhashsetè¯¾åç»ƒä¹ é¢˜)
  - [`Map`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•](#mapæ¥å£å’Œå¸¸ç”¨æ–¹æ³•)
    - [ğŸš©`Map`æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹](#mapæ¥å£å®ç°ç±»çš„ç‰¹ç‚¹)
    - [`Map`æ¥å£å¸¸ç”¨æ–¹æ³•](#mapæ¥å£å¸¸ç”¨æ–¹æ³•)
    - [`Map`æ¥å£éå†æ–¹æ³•](#mapæ¥å£éå†æ–¹æ³•)
    - [`Map`æ¥å£è¯¾å ‚ç»ƒä¹ ](#mapæ¥å£è¯¾å ‚ç»ƒä¹ )
  - [`Map`æ¥å£å®ç°ç±»â€”â€”`HashMap`](#mapæ¥å£å®ç°ç±»hashmap)
    - [`HashMap`å°ç»“](#hashmapå°ç»“)
    - [`HashMap`åº•å±‚æœºåˆ¶åŠæºç å‰–æ](#hashmapåº•å±‚æœºåˆ¶åŠæºç å‰–æ)
  - [`Map`æ¥å£å®ç°ç±»â€”`Hashtable`](#mapæ¥å£å®ç°ç±»hashtable)
    - [`Hashtable`çš„åŸºæœ¬ä»‹ç»](#hashtableçš„åŸºæœ¬ä»‹ç»)
    - [`Hashtable`å’Œ`HashMap`å¯¹æ¯”](#hashtableå’Œhashmapå¯¹æ¯”)
  - [`Map`æ¥å£å®ç°ç±»â€”â€”`Properties`](#mapæ¥å£å®ç°ç±»properties)
  - [ğŸš©æ€»ç»“â€”â€”å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»](#æ€»ç»“å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»)
    - [`TreeSet`](#treeset)
    - [`TreeMap`](#treemap)
  - [`Collections`å·¥å…·ç±»](#collectionså·¥å…·ç±»)
    - [`Collections`å·¥å…·ç±»ä»‹ç»](#collectionså·¥å…·ç±»ä»‹ç»)
    - [æ’åºæ“ä½œï¼ˆå‡ä¸º`static`æ–¹æ³•ï¼‰](#æ’åºæ“ä½œå‡ä¸ºstaticæ–¹æ³•)

# ç¬¬14ç«  é›†åˆ
## é›†åˆçš„ç†è§£å’Œå¥½å¤„
### æ•°ç»„
1. é•¿åº¦å¼€å§‹å¿…é¡»æŒ‡å®šï¼Œè€Œä¸”ä¸€æ—¦æŒ‡å®šï¼Œä¸èƒ½æ›´æ”¹
2. ä¿å­˜çš„å¿…é¡»ä¸ºåŒä¸€ç±»å‹çš„å…ƒç´ 
3. ä½¿ç”¨æ•°ç»„è¿›è¡Œå¢åŠ /åˆ é™¤å…ƒç´ æ¯”è¾ƒéº»çƒ¦

### é›†åˆ
1. å¯ä»¥**åŠ¨æ€ä¿å­˜**ä»»æ„å¤šä¸ªå¯¹è±¡ï¼Œä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ï¼
2. æä¾›äº†ä¸€ç³»åˆ—æ–¹ä¾¿çš„æ“ä½œå¯¹è±¡çš„æ–¹æ³•ï¼šaddã€removeã€setã€getç­‰
3. ä½¿ç”¨é›†åˆæ·»åŠ åˆ é™¤æ–°å…ƒç´ çš„ä»£ç ç®€æ´

## ğŸš©é›†åˆçš„æ¡†æ¶ä½“ç³»
Javaçš„é›†åˆç±»å¾ˆå¤šï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œæ¡†æ¶ä½“ç³»éœ€è¦è®°ä½ï¼ï¼ï¼[Collection_.java](/code/chapter14/src/com/jinjin/collection_/Collection_.java)

<img src="/notes/img-ch14/Collection.png">

<img src="/notes/img-ch14/Map.png">

## Collectionæ¥å£å’Œå¸¸ç”¨æ–¹æ³•
### Collectionæ¥å£å®ç°ç±»çš„ç‰¹ç‚¹
`public interface Collection<E> extends Iterable<E>`

1. `Collection`å®ç°å­ç±»å¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯`Object`
2. æœ‰äº›`Collection`çš„å®ç°ç±»ï¼Œå¯ä»¥å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼Œæœ‰äº›ä¸å¯ä»¥
3. æœ‰äº›`Collection`çš„å®ç°ç±»ï¼Œæœ‰äº›æ˜¯æœ‰åºçš„ï¼ˆ`List`ï¼‰ï¼Œæœ‰äº›ä¸æ˜¯æœ‰åºçš„ï¼ˆ`Set`ï¼‰
4. `Collection`æ¥å£æ²¡æœ‰ç›´æ¥å®ç°çš„å­ç±»ï¼Œæ˜¯é€šè¿‡å®ƒçš„å­æ¥å£`Set`å’Œ`List`æ¥å®ç°çš„

`Collection`æ¥å£å¸¸ç”¨æ–¹æ³•ï¼Œä»¥å®ç°å­ç±»`ArrayList`ä¸ºä¾‹ã€‚[CollectionMethod.java](/code/chapter14/src/com/jinjin/collection_/CollectionMethod.java)
* `add` æ·»åŠ å•ä¸ªå…ƒç´ 
* `remove` åˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œå¯ä»¥æŒ‡å®šåˆ é™¤çš„ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤æŒ‡å®šçš„æŸä¸ªå…ƒç´ 
* `contains` æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨
* `size` è·å–å…ƒç´ ä¸ªæ•°
* `isEmpty` åˆ¤æ–­æ˜¯å¦ä¸ºç©º
* `clear` æ¸…ç©º
* `addAll` æ·»åŠ å¤šä¸ªå…ƒç´ 
* `containsAll` æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨
* `removeAll` åˆ é™¤å¤šä¸ªå…ƒç´ 

### `Collection`æ¥å£éå†å…ƒç´ æ–¹å¼1-ä½¿ç”¨`Iterator`ï¼ˆè¿­ä»£å™¨ï¼‰
**åŸºæœ¬ä»‹ç»**
1. `Iterator`å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼Œä¸»è¦ç”¨äºéå†`Collection`é›†åˆä¸­çš„å…ƒç´ ã€‚
2. æ‰€æœ‰å®ç°äº†`Collection`æ¥å£çš„é›†åˆç±»éƒ½æœ‰ä¸€ä¸ª`iterator()`æ–¹æ³•ï¼Œç”¨ä»¥è¿”å›ä¸€ä¸ªå®ç°äº†`Iterator`æ¥å£çš„å¯¹è±¡ï¼Œå³å¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚
3. `Iterator`çš„ç»“æ„
4. `Iterator`ä»…ç”¨äºéå†é›†åˆï¼Œ`Iterator`æœ¬èº«å¹¶ä¸å­˜æ”¾å¯¹è±¡ã€‚

**è¿­ä»£å™¨çš„æ‰§è¡ŒåŸç†**
```java
Iterator iterator = coll.iterator(); //å¾—åˆ°ä¸€ä¸ªé›†åˆè¿­ä»£å™¨
//hasNext() åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ 
while(iterator.hasNext()){
    //next()ä½œç”¨ï¼š1.ä¸‹ç§» 2.å°†ä¸‹ç§»ä»¥åé›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å›
    System.out.println(iterator.next());
}
```

<img src="/notes/img-ch14/iterator.png">

**`Iterator`æ¥å£çš„æ–¹æ³•**
* `hasNext()`
* `next()`
* `remove()`
* åœ¨è°ƒç”¨`iterator.next()`æ–¹æ³•ä¹‹å‰å¿…é¡»è°ƒç”¨`iterator.hasNext()`è¿›è¡Œæ£€æµ‹ã€‚è‹¥ä¸è°ƒç”¨ï¼Œä¸”ä¸‹ä¸€æ¡è®°å½•æ— æ•ˆï¼Œç›´æ¥è°ƒç”¨`iterator.next()`ä¼šæŠ›å‡º`NoSuchElementException`å¼‚å¸¸ã€‚

æ¡ˆä¾‹ï¼š[CollectionIterator.java](/code/chapter14/src/com/jinjin/collection_/CollectionIterator.java)
* éœ€è¦å†æ¬¡ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ï¼Œéœ€è¦é‡ç½®è¿­ä»£å™¨:`iterator = col.iteraor();`
* è¿­ä»£å™¨éå†çš„å¿«æ·é”®ï¼šitit
* æ˜¾ç¤ºæ‰€æœ‰å¿«æ·é”®çš„å¿«æ·é”®ï¼š`command` + `j`

### `Collection`æ¥å£éå†å¯¹è±¡æ–¹å¼2-å¢å¼º`for`å¾ªç¯
å¢å¼º`for`å¾ªç¯ï¼Œå¯ä»¥ä»£æ›¿`iterator`è¿­ä»£å™¨ã€‚ç‰¹ç‚¹ï¼šå¢å¼º`for`å°±æ˜¯ç®€åŒ–ç‰ˆçš„`iterator`ï¼Œæœ¬è´¨ä¸€æ ·ã€‚åªèƒ½ç”¨äºéå†é›†åˆæˆ–æ•°ç»„ã€‚

**åŸºæœ¬è¯­æ³•ï¼š**
```java
for(å…ƒç´ ç±»å‹ å…ƒç´ å: é›†åˆåæˆ–æ•°ç»„å){
    è®¿é—®å…ƒç´ 
}
```

æ¡ˆä¾‹ï¼š[CollectionFor.java](/code/chapter14/src/com/jinjin/collection_/CollectionFor.java)
* å¢å¼º`for`å¾ªç¯å¿«æ·é”®ï¼š`I`
* é€šè¿‡è¿½æºç çŸ¥é“å®è´¨ä¹Ÿæ˜¯`iterator`

### è¯¾å ‚ç»ƒä¹ 
ç¼–å†™ç¨‹åº [CollectionExercise.java](/code/chapter14/src/com/jinjin/collection_/CollectionExercise.java)
1. åˆ›å»º3ä¸ª`Dog{name,age}`å¯¹è±¡ï¼Œæ”¾å…¥åˆ°`ArrayList`ä¸­ï¼Œèµ‹ç»™`List`å¼•ç”¨
2. ç”¨è¿­ä»£å™¨å’Œå¢å¼º`for`å¾ªç¯ä¸¤ç§æ–¹å¼éå†
3. é‡å†™`Dog`çš„`toString`æ–¹æ³•ï¼Œè¾“å‡º`name`å’Œ`age`

## `List`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•
### `List`æ¥å£åŸºæœ¬ä»‹ç»
`List`æ¥å£æ˜¯`Collection`æ¥å£çš„å­æ¥å£ [List_.java](/code/chapter14/src/com/jinjin/list_/List_.java)
1. `List`é›†åˆç±»ä¸­å…ƒç´ æœ‰åºï¼ˆå³æ·»åŠ é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´ï¼‰ã€ä¸”å¯é‡å¤
2. `List`é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼Œå³æ”¯æŒç´¢å¼•
3. JDK APIä¸­`List`æ¥å£çš„å®ç°ç±»æœ‰ï¼š

<img src="/notes/img-ch14/List.png">

å¸¸ç”¨çš„æœ‰ï¼š`ArrayList`ã€`LinkedList`å’Œ`Vector`ã€‚

### `List`æ¥å£çš„å¸¸ç”¨æ–¹æ³•
[ListMethod.java](/code/chapter14/src/com/jinjin/list_/ListMethod.java)
*  `void add(int index, Object ele)`:åœ¨`index`ä½ç½®æ’å…¥`ele`å…ƒç´ 
*  `boolean addAll(int index, Collection eles)`:ä»`index`ä½ç½®å¼€å§‹å°†`eles`ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥
*  `Object get(int index)`:è·å–æŒ‡å®š`index`ä½ç½®çš„å…ƒç´ 
*  `int indexOf(Object obj)`:è¿”å›`obj`åœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®
*  `int lastIndexOf(Object obj)`:è¿”å›`obj`åœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®
*  `Object remove(int index)`:ç§»é™¤æŒ‡å®š`index`ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ 
*  `Object set(int index, Object ele)`:è®¾ç½®æŒ‡å®š`index`ä½ç½®çš„å…ƒç´ ä¸º`ele` , ç›¸å½“äºæ˜¯æ›¿æ¢.
*  `List subList(int fromIndex, int toIndex)`:è¿”å›ä»`fromIndex`åˆ°`toIndex`ä½ç½®çš„å­é›†åˆ,æ³¨æ„è¿”å›çš„å­é›†åˆ`fromIndex` <= `subList` < `toIndex`

### `List`æ¥å£è¯¾å ‚ç»ƒä¹ 
[ListExercise.java](/code/chapter14/src/com/jinjin/list_/ListExercise.java)

æ·»åŠ 10ä¸ªä»¥ä¸Šçš„å…ƒç´ ï¼ˆæ¯”å¦‚`String "hello"`ï¼‰ï¼Œåœ¨2å·ä½æ’å…¥ä¸€ä¸ªå…ƒç´ "è¿›è¿›"ï¼Œè·å¾—ç¬¬5ä¸ªå…ƒç´ ï¼Œåˆ é™¤ç¬¬6ä¸ªå…ƒç´ ï¼Œä¿®æ”¹ç¬¬7ä¸ªå…ƒç´ ï¼Œå†ä½¿ç”¨è¿­ä»£å™¨éå†é›†åˆï¼Œè¦æ±‚ï¼šä½¿ç”¨`List`å®ç°ç±»`ArrayList`å®Œæˆã€‚

### `List`çš„ä¸‰ç§éå†æ–¹å¼ï¼ˆ`ArrayList`ã€`LinkedList`ã€`Vector`ï¼‰
[ListFor.java)](/code/chapter14/src/com/jinjin/list_/ListFor.java)
1. æ–¹å¼ä¸€ï¼šä½¿ç”¨`iterator`
    ```java
    Iterator iterator = list.iterator();
    while (iterator.hasNext()) {
        Object obj =  iterator.next();
        System.out.println(obj);

    }
    ```
2. æ–¹å¼äºŒï¼šä½¿ç”¨å¢å¼º`for`
    ```java
    for (Object o : list) {
        System.out.println("o=" + o);
    }
    ```
3. æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ™®é€š`for`
    ```java
    for (int i = 0; i < list.size(); i++) {
        System.out.println("å¯¹è±¡=" + list.get(i));
    }
    ```


**è¯´æ˜**ï¼šä½¿ç”¨`LinkedList`å®Œæˆï¼Œä½¿ç”¨æ–¹å¼å’Œ`ArrayList`ä¸€æ ·ã€‚

### å®ç°ç±»çš„è¯¾å ‚ç»ƒä¹ 2
ä½¿ç”¨`List`çš„å®ç°ç±»æ·»åŠ ä¸‰æœ¬å›¾ä¹¦ï¼Œå¹¶éå†ï¼Œæ‰“å°å¦‚ä¸‹æ•ˆæœï¼š

<img src="/notes/img-ch14/ListExercise02.png">

è¦æ±‚ï¼š
1. æŒ‰ä»·æ ¼æ’åºï¼Œä»ä½åˆ°é«˜ï¼ˆä½¿ç”¨å†’æ³¡æ³•ï¼‰
2. è¦æ±‚ä½¿ç”¨`ArrayList`ã€`LinkedList`å’Œ`Vector`ä¸‰ç§é›†åˆå®ç°

**ä»£ç ï¼š**[ListExercise02.java](/code/chapter14/src/com/jinjin/list_/ListExercise02.java)
* å†’æ³¡æ’åºæ–¹æ³•
```java
public static void sort(List list) {
    for (int i = 0; i < list.size() - 1; i++) {
        for (int j = 0; j < list.size() - i - 1; j++) {
            Book book1 = (Book) list.get(j);
            Book book2 = (Book) list.get(j + 1);
            if (book1.getPrice() > book2.getPrice()) {
                list.set(j + 1, book1);
                list.set(j, book2);
            }
        }
    }
}
```
## `ArrayList`åº•å±‚ç»“æ„å’Œæºç åˆ†æ
### `ArrayList`çš„æ³¨æ„äº‹é¡¹
1. permits all elements, including null, `ArrayList`å¯ä»¥åŠ å…¥`null`ï¼Œå¹¶ä¸”å¤šä¸ªä¹Ÿå¯ä»¥
2. `ArrayList`æ˜¯ç”±æ•°ç»„æ¥å®ç°æ•°æ®å­˜å‚¨çš„
3. `ArrayList`åŸºæœ¬ç­‰åŒäº`Vector`ï¼Œé™¤äº†`ArrayList`æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ˆæ‰§è¡Œæ•ˆç‡é«˜ï¼‰ï¼Œåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨`ArrayList`ã€‚

### ğŸš©ğŸš©ğŸš©`ArrayList`çš„åº•å±‚æ“ä½œæœºåˆ¶æºç åˆ†æ
[ArrayListSource.java](/code/chapter14/src/com/jinjin/list_/ArrayListSource.java)
1. `ArrayList`ä¸­ç»´æŠ¤äº†ä¸€ä¸ª`Object`ç±»å‹çš„æ•°ç»„`elementData`
    ```java
    //transient è¡¨ç¤ºç¬é—´ï¼ŒçŸ­æš‚çš„ï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–
    transient Object[] elementData; 
    ```
2. å½“åˆ›å»º`ArrayList`å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹`elementData`å®¹é‡ä¸º0ï¼Œç¬¬1æ¬¡æ·»åŠ ï¼Œåˆ™æ‰©å®¹`elementData`ä¸º10ï¼Œå¦‚éœ€å†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å®¹`elementData`ä¸º1.5å€ã€‚ï¼ˆJDK8ï¼‰
3. å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå¤§å°çš„æ„é€ å™¨ï¼Œåˆ™åˆå§‹`elementData`å®¹é‡ä¸ºæŒ‡å®šå¤§å°ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹`elementData`ä¸º1.5å€ã€‚

* `ArrayList`æ‰©å®¹æœºåˆ¶

<img src="/notes/img-ch14/ArrayList.png">

* é»˜è®¤æƒ…å†µä¸‹ï¼ŒIDEAæ˜¾ç¤ºçš„æ˜¯ç®€åŒ–åçš„æ•°æ®ã€‚IDEAè®¾ç½®çœ‹åˆ°å®Œæ•´çš„æ•°æ®æ­¥éª¤:é€‰æ‹©Preferences-Buile,Execution,Deployment-Debugger-Data Viewer-Javaï¼Œå»æ‰å‹¾é€‰alternative view for Collections classesã€‚

<img src="/notes/img-ch14/IDEA-Debugger.png">

### é…ç½®IDEA-æ›´æ”¹JDKç‰ˆæœ¬
å‚è€ƒ[Macé…ç½®JDKç‰ˆæœ¬](https://www.cnblogs.com/diShuiZhiYi/p/13774075.html)ï¼Œå¦‚æœæ˜¯æŸä¸€ä¸ªprojectéœ€è¦æ›´æ¢JDKç‰ˆæœ¬ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹è®¾ç½®ã€‚

<img src="/notes/img-ch14/IDEA-SDK.png">

## `Vector`åº•å±‚ç»“æ„å’Œæºç å‰–æ
### `Vector`çš„åŸºæœ¬ä»‹ç»
[Vector_.java](/code/chapter14/src/com/jinjin/list_/Vector_.java)
1. `Vector`ç±»çš„å®šä¹‰è¯´æ˜
    ```java
    public class Vector<E>
    extends AbstractList<E>
    implements List<E>, RandomAccess, Cloneable, java.io.Serializable
    ```
2. `Vector`åº•å±‚ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œ`protected Object[] elementData;`
3. `Vector`æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œå³çº¿ç¨‹å®‰å…¨ï¼Œ`Vector`ç±»çš„æ“ä½œæ–¹æ³•å¸¦æœ‰`synchronized`
    ```java
    public synchronized E get(int index) {
        if (index >= elementCount)
            throw new ArrayIndexOutOfBoundsException(index);

        return elementData(index);
    }
    ```

### `Vector`å’Œ`ArrayList`çš„æ¯”è¾ƒ
||åº•å±‚ç»“æ„|ç‰ˆæœ¬|çº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥ï¼‰æ•ˆç‡|æ‰©å®¹å€æ•°|
|----|----|----|----|----|
|`ArrayList`|å¯å˜æ•°ç»„|jdk1.2|ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜|å¦‚æœæœ‰å‚æ„é€ 1.5å€ï¼Œå¦‚æœæ˜¯æ— å‚æ„é€ ï¼Œç¬¬ä¸€æ¬¡10ï¼Œä»ç¬¬äºŒæ¬¡å¼€å§‹æŒ‰1.5å€æ‰©|
|`Vector`|å¯å˜æ•°ç»„`Object[]`|jdk1.0|å®‰å…¨ï¼Œæ•ˆç‡ä¸é«˜|å¦‚æœæ˜¯æ— å‚æ„é€ ï¼Œé»˜è®¤10ï¼Œæ»¡åï¼Œå°±æŒ‰2å€æ‰©å®¹ã€‚å¦‚æœæŒ‡å®šå¤§å°ï¼Œåˆ™æ¯æ¬¡ç›´æ¥æŒ‰2å€æ‰©å®¹ã€‚|

## `LinkedList`åº•å±‚ç»“æ„
### `LinkedList`çš„å…¨é¢è¯´æ˜
1. `LinkedList`åº•å±‚å®ç°äº†åŒå‘**é“¾è¡¨**å’ŒåŒç«¯**é˜Ÿåˆ—**çš„ç‰¹ç‚¹ã€‚
2. å¯ä»¥æ·»åŠ ä»»æ„å…ƒç´ ï¼ˆå…ƒç´ å¯ä»¥é‡å¤ï¼‰ï¼ŒåŒ…æ‹¬`null`ã€‚
3. çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰å®ç°åŒæ­¥ã€‚

### `LinkedList`çš„åº•å±‚æ“ä½œæœºåˆ¶
1. `LinkedList`åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨
2. `LinkedList`ä¸­ç»´æŠ¤äº†ä¸¤ä¸ªå±æ€§`first`å’Œ`last`åˆ†åˆ«æŒ‡å‘é¦–èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ã€‚
3. æ¯ä¸ªèŠ‚ç‚¹ï¼ˆ`Node`å¯¹è±¡ï¼‰ï¼Œé‡Œé¢åˆç»´æŠ¤äº†`prev`ã€`next`ã€`item`ä¸‰ä¸ªå±æ€§ï¼Œå…¶ä¸­é€šè¿‡`prev`æŒ‡å‘å‰ä¸€ä¸ªï¼Œé€šè¿‡`next`æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆå®ç°åŒå‘é“¾è¡¨ã€‚
4. æ‰€ä»¥`LinkedList`çš„å…ƒç´ çš„**æ·»åŠ å’Œåˆ é™¤**ï¼Œä¸æ˜¯é€šè¿‡æ•°ç»„å®Œæˆçš„ï¼Œç›¸å¯¹æ¥è¯´æ•ˆç‡è¾ƒé«˜ã€‚
5. æ¨¡æ‹Ÿä¸€ä¸ª**ç®€å•**çš„åŒå‘é“¾è¡¨ã€‚

<img src="/notes/img-ch14/LinkedList.png">

### `LinkedList`çš„å¢åˆ æ”¹æŸ¥æ¡ˆä¾‹
* è¿½æºç ï¼Œåˆ†æ`LinkedList`åº•å±‚æ“ä½œ [LinkedListCRUD.java](/code/chapter14/src/com/jinjin/list_/LinkedListCRUD.java)

<img src="/notes/img-ch14/LinkedListCRUD.png">

## `ArrayList`å’Œ`LinkedList`æ¯”è¾ƒ
### `ArrayList`å’Œ`LinkedList`çš„æ¯”è¾ƒ
|    |åº•å±‚ç»“æ„|å¢åˆ çš„æ•ˆç‡|æ”¹æŸ¥çš„æ•ˆç‡|
|----|----|----|----|
|`ArrayList`|å¯å˜æ•°ç»„|è¾ƒä½ï¼Œæ•°ç»„æ‰©å®¹|è¾ƒé«˜|
|`LinkedList`|åŒå‘é“¾è¡¨|è¾ƒé«˜ï¼Œé€šè¿‡é“¾è¡¨è¿½åŠ |è¾ƒä½|

**å¦‚ä½•é€‰æ‹©`ArrayList`å’Œ`LinkedList`**
1. å¦‚æœæˆ‘ä»¬æ”¹æŸ¥çš„æ“ä½œå¤šï¼Œé€‰æ‹©`ArrayList`
2. å¦‚æœæˆ‘ä»¬å¢åˆ çš„æ“ä½œå¤šï¼Œé€‰æ‹©`LinkedList`
3. ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç¨‹åºä¸­ï¼Œ80%-90%éƒ½æ˜¯æŸ¥è¯¢ï¼Œå› æ­¤å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šé€‰æ‹©`ArrayList`
4. åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡çµæ´»é€‰æ‹©ï¼Œä¹Ÿå¯èƒ½è¿™æ ·ï¼Œä¸€ä¸ªæ¨¡å—ä½¿ç”¨`ArrayList`ï¼Œå¦å¤–ä¸€ä¸ªæ¨¡å—æ˜¯`LinkedList`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æ ¹æ®ä¸šåŠ¡æ¥é€‰æ‹©ã€‚

## `Set`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•
### `Set`æ¥å£åŸºæœ¬ä»‹ç»
1. æ— åºï¼ˆæ·»åŠ å’Œå–å‡ºçš„é¡ºåºä¸ä¸€è‡´ï¼‰ï¼Œæ²¡æœ‰ç´¢å¼•
2. ä¸å…è®¸é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥æœ€å¤šåŒ…å«ä¸€ä¸ª`null`
3. JDK APIä¸­`Set`æ¥å£çš„å®ç°ç±»æœ‰ï¼š

<img src="/notes/img-ch14/Interface%20Set.png">

### `Set`æ¥å£çš„å¸¸ç”¨æ–¹æ³•
å’Œ`List`æ¥å£ä¸€æ ·ï¼Œ`Set`æ¥å£ä¹Ÿæ˜¯`Collection`çš„å­æ¥å£ï¼Œå› æ­¤ï¼Œå¸¸ç”¨æ–¹æ³•å’Œ`Collection`æ¥å£ä¸€æ ·ã€‚

### `Set`æ¥å£çš„éå†æ–¹å¼
åŒ`Collection`çš„éå†æ–¹å¼ä¸€æ ·ï¼Œå› ä¸º`Set`æ¥å£æ˜¯`Collection`æ¥å£çš„å­æ¥å£ã€‚
1. å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨
2. å¢å¼º`for`
3. **ä¸èƒ½ä½¿ç”¨**ç´¢å¼•çš„æ–¹å¼æ¥è·å–ã€‚

### `Set`æ¥å£çš„å¸¸ç”¨æ–¹æ³•ä¸¾ä¾‹
[SetMethod.java](/code/chapter14/src/com/jinjin/set_/SetMethod.java)

1. `Set`æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡(`Set`æ¥å£å¯¹è±¡), ä¸èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ , å¯ä»¥æ·»åŠ ä¸€ä¸ª`null`
2. `Set`æ¥å£å¯¹è±¡å­˜æ”¾æ•°æ®æ˜¯æ— åº(å³æ·»åŠ çš„é¡ºåºå’Œå–å‡ºçš„é¡ºåºä¸ä¸€è‡´)
3. **æ³¨æ„**ï¼šå–å‡ºçš„é¡ºåºçš„é¡ºåºè™½ç„¶ä¸æ˜¯æ·»åŠ çš„é¡ºåºï¼Œä½†æ˜¯å®ƒæ˜¯å›ºå®šçš„.
4. éå†æ–¹æ³•åªæœ‰ä¸¤ç§ï¼Œä½¿ç”¨è¿­ä»£å™¨å’Œå¢å¼º`for`å¾ªç¯ï¼Œä¸èƒ½ä½¿ç”¨æ™®é€š`for`å¾ªç¯ï¼Œå› ä¸º`Set`æ¥å£å¯¹è±¡ä¸èƒ½é€šè¿‡ç´¢å¼•æ¥è·å–ã€‚

## `Set`æ¥å£å®ç°ç±»â€”â€”`HashSet`
### `HashSet`çš„å…¨é¢è¯´æ˜
[HashSet_.java](/code/chapter14/src/com/jinjin/set_/HashSet_.java)
1. `HashSet`å®ç°äº†`Set`æ¥å£
2. `HashSet`å®é™…ä¸Šæ˜¯`HashMap`ï¼Œæºç ï¼š
  ```java
  public HashSet() {
      map = new HashMap<>();
  }
  ```
3. å¯ä»¥å­˜æ”¾`null`å€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª`null`
4. `HashSet`ä¸ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œå–`hash`åï¼Œå†ç¡®å®šç´¢å¼•çš„ç»“æœã€‚ï¼ˆå³ä¸ä¿è¯å­˜æ”¾å…ƒç´ çš„é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´ï¼‰
5. ä¸èƒ½æœ‰é‡å¤å…ƒç´ /å¯¹è±¡ã€‚

### `HashSet`æ¡ˆä¾‹
æ¡ˆä¾‹ï¼š[HashSet01.java](/code/chapter14/src/com/jinjin/set_/HashSet01.java)

**ç»å…¸é¢è¯•é¢˜**ï¼šç¬¬äºŒå¥èƒ½å¦åŠ å…¥ï¼Ÿ
```java
set.add(new String("hsp"));//ok
set.add(new String("hsp"));//åŠ å…¥ä¸äº†.
System.out.println("set=" + set);
```

### `HashSet`åº•å±‚æœºåˆ¶è¯´æ˜

* `HashSet`åº•å±‚æ˜¯`HashMap`ï¼Œ`HashMap`åº•å±‚æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚[HashSetStructure.java](/code/chapter14/src/com/jinjin/set_/HashSetStructure.java)

<img src="/notes/img-ch14/hashset/HashSet01.png">

* `HashSet`çš„æ·»åŠ å…ƒç´ åº•å±‚æ˜¯å¦‚ä½•å®ç°?(hash()+equals()) [HashSetSource.java](/code/chapter14/src/com/jinjin/set_/HashSetSource.java)

<img src="/notes/img-ch14/hashset/HashSetSource.png">

* åˆ†æ`HashSet`çš„æ‰©å®¹å’Œè½¬æˆçº¢é»‘æ ‘æœºåˆ¶ [HashSetIncrement.java](/code/chapter14/src/com/jinjin/set_/HashSetIncrement.java)

<img src="/notes/img-ch14/hashset/HashSetIncrement.png">

* `threshold`çš„å€¼ï¼Œæ•°ç»„æˆ–è€…é“¾è¡¨åæ·»åŠ çš„ç»“ç‚¹éƒ½çº³å…¥è®¡ç®—ã€‚
* åœ¨è¿›è¡Œæ ‘åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ˜¯åœ¨åŒä¸€ä¸ª`hash`å€¼åï¼Œä¸åœçš„æŒ‚è½½ç»“ç‚¹ï¼Œå¦‚æœç»“ç‚¹æ•°åˆ°è¾¾8ï¼Œè€Œ`table`çš„å¤§å°æ²¡æœ‰åˆ°è¾¾64ï¼Œåˆ™æ¯åœ¨é“¾è¡¨åæŒ‚è½½ä¸€ä¸ªç»“ç‚¹ï¼Œ`table`çš„`size`ç¿»å€ï¼Œç›´åˆ°è¾¾åˆ°64ï¼Œåˆ™ä¼šè¿›è¡Œæ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰ã€‚

**Remark**ï¼šå¤šè¿½æºç åˆ†æ

### `HashSet`è¯¾å ‚ç»ƒä¹ 1
[HashSetExercise.java](/code/chapter14/src/com/jinjin/set_/HashSetExercise.java)

å®šä¹‰ä¸€ä¸ª`Employee`ç±»ï¼Œè¯¥ç±»åŒ…å«ï¼š`private`æˆå‘˜å±æ€§`name`ï¼Œ`age`ã€‚è¦æ±‚ï¼š
1. åˆ›å»º3ä¸ª`Employee`å¯¹è±¡æ”¾å…¥`HashSet`ä¸­
2. å½“`name`å’Œ`age`çš„å€¼ç›¸åŒæ—¶ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒå‘˜å·¥ï¼Œä¸èƒ½æ·»åŠ åˆ°`HashSet`é›†åˆä¸­ã€‚

### `HashSet`è¯¾å ‚ç»ƒä¹ 2
[HashSetExercise02.java](/code/chapter14/src/com/jinjin/set_/exercise2/HashSetExercise02.java)

å®šä¹‰ä¸€ä¸ª`Employee`ç±»ï¼Œè¯¥ç±»åŒ…å«ï¼šï¼š`private`æˆå‘˜å±æ€§`name`ï¼Œ`sal`ï¼Œ`birthday`(`MyDate`ç±»å‹)ï¼Œå…¶ä¸­`birthday`ä¸º`MyDate`ç±»å‹ï¼ˆå±æ€§åŒ…æ‹¬ï¼š`year`ã€`month`ã€`day`ï¼‰ã€‚è¦æ±‚ï¼š
1. åˆ›å»º3ä¸ª`Employee`å¯¹è±¡æ”¾å…¥`HashSet`ä¸­
2. å½“`name`å’Œ`birthday`çš„å€¼ç›¸åŒæ—¶ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒå‘˜å·¥ï¼Œä¸èƒ½æ·»åŠ åˆ°`HashSet`é›†åˆä¸­ã€‚

* è¿™é‡Œéœ€è¦åœ¨`MyDate`ç±»ä¸­é‡å†™`hashCode()`å’Œ`equals()`æ–¹æ³•ã€‚

## `Set`æ¥å£å®ç°ç±»-`LinkedHashSet`
### `LinkedHashSet`çš„å…¨é¢è¯´æ˜
* `LinkedHashSet`æ˜¯`HashSet`çš„å­ç±»

<img src="/notes/img-ch14/hashset/LinkedHashSet.png">

* `LinkedHashSet`åº•å±‚æ˜¯ä¸€ä¸ª`LinkedHashMap`ï¼Œåº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª**æ•°ç»„ + åŒå‘é“¾è¡¨**ã€‚
* `LinkedHashSet`æ ¹æ®å…ƒç´ çš„`hashCode`å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ŒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œè¿™ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ã€‚
* `LinkedHashSet`ä¸å…è®¸æ·»åŠ é‡å¤å…ƒç´ ã€‚

[LinkedHashSetSource.java](/code/chapter14/src/com/jinjin/set_/LinkedHashSetSource.java):

<img src="/notes/img-ch14/hashset/LinkedHashSetSource.png">

* æ·»åŠ ç¬¬ä¸€æ¬¡æ—¶ï¼Œç›´æ¥å°†æ•°ç»„`table`æ‰©å®¹åˆ° 16 ,å­˜æ”¾çš„ç»“ç‚¹ç±»å‹æ˜¯ `LinkedHashMap$Entry`ã€‚æ•°ç»„æ˜¯`HashMap$Node[]`å­˜æ”¾çš„å…ƒç´ /æ•°æ®æ˜¯ `LinkedHashMap$Entry`ç±»å‹

<img src="/notes/img-ch14/hashset/LinkedHashSetSource02.png">

### `LinkedHashSet`è¯¾åç»ƒä¹ é¢˜
[LinkedHashSetExercise.java](/code/chapter14/src/com/jinjin/set_/LinkedHashSetExercise.java)

<img src="/notes/img-ch14/hashset/LinkedHashSetExercise.png">

## `Map`æ¥å£å’Œå¸¸ç”¨æ–¹æ³•
### ğŸš©`Map`æ¥å£å®ç°ç±»çš„ç‰¹ç‚¹
æ³¨æ„ï¼šè¿™é‡Œè®²çš„æ˜¯**JDK8**çš„`Map`æ¥å£ç‰¹ç‚¹ [Map_.java](/code/chapter14/src/com/jinjin/map_/Map_.java)
1. `Map`ä¸`Collection`å¹¶åˆ—å­˜åœ¨ã€‚ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®:Key-Value(åŒåˆ—å…ƒç´ )
2. `Map`ä¸­çš„`key`å’Œ`value`å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä¼šå°è£…åˆ°`HashMap$Node`å¯¹è±¡ä¸­
3. `Map`ä¸­çš„`key`ä¸å…è®¸é‡å¤ï¼ŒåŸå› å’Œ`HashSet`ä¸€æ ·.
4. `Map`ä¸­çš„`value`å¯ä»¥é‡å¤
5. `Map`çš„`key`å¯ä»¥ä¸º`null`, `value`ä¹Ÿå¯ä»¥ä¸º`null`ï¼Œæ³¨æ„`key`ä¸º`null`,åªèƒ½æœ‰ä¸€ä¸ªï¼Œ`value`ä¸º`null`,å¯ä»¥å¤šä¸ª
6. å¸¸ç”¨`String`ç±»ä½œä¸º`Map`çš„`key`
7. `key`å’Œ`value`ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„`key`æ€»èƒ½æ‰¾åˆ°å¯¹åº”çš„ `value`
8. `Map`å­˜æ”¾æ•°æ®çš„`key-value`ç¤ºæ„å›¾ï¼Œä¸€å¯¹`k-v`æ˜¯æ”¾åœ¨ä¸€ä¸ª`HashMap$Node`ä¸­çš„ï¼Œå› ä¸º`Node`å®ç°ç±»`Entry`æ¥å£ï¼Œæœ‰äº›ä¹¦ä¸Šä¹Ÿè¯´ä¸€å¯¹`k-v`å°±æ˜¯ä¸€ä¸ª`Entry`ã€‚ [MapSource_.java](../code/chapter14/src/com/jinjin/map_/MapSource_.java)

<img src="/notes/img-ch14/map/MapSource.png">

```java
static class Node<K,V> implements Map.Entry<K,V> //HashMap class
final class EntrySet extends AbstractSet<Map.Entry<K,V>> //HashMap class
transient Set<Map.Entry<K,V>> entrySet; //HashMap field
Set<Map.Entry<K, V>> entrySet(); //Map
interface Entry<K,V>  //Map
```

### `Map`æ¥å£å¸¸ç”¨æ–¹æ³•
[MapMethod.java](/code/chapter14/src/com/jinjin/map_/MapMethod.java)

### `Map`æ¥å£éå†æ–¹æ³•
Mapéå†çš„ç¤ºæ„å›¾ï¼ˆæ¯”`List`å’Œ`Set`å¤æ‚ç‚¹ï¼Œä½†æ˜¯åŸºæœ¬åŸç†ä¸€æ ·ï¼‰

<img src="/notes/img-ch14/map/MapFor.png">

Mapéå†æ–¹å¼æ¡ˆä¾‹ [MapFor.java](/code/chapter14/src/com/jinjin/map_/MapFor.java)
1. `containsKey`:æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨
2. `keySet`: è·å–æ‰€æœ‰çš„é”®
3. `entrySet`: è·å–æ‰€æœ‰å…³ç³»k-v
4. `values`: è·å–æ‰€æœ‰å€¼

### `Map`æ¥å£è¯¾å ‚ç»ƒä¹ 
[MapExercise.java](/code/chapter14/src/com/jinjin/map_/MapExercise.java)

ä½¿ç”¨`HashMa`pæ·»åŠ 3ä¸ªå‘˜å·¥å¯¹è±¡ï¼Œè¦æ±‚  
1. é”®ï¼šå‘˜å·¥`id`
2. å€¼ï¼šå‘˜å·¥å¯¹è±¡
  
éå†æ˜¾ç¤ºå·¥èµ„>180000çš„å‘˜å·¥ï¼ˆéå†æ–¹å¼æœ€å°‘ä¸¤ç§)ï¼Œå…¶ä¸­å‘˜å·¥ç±»:å§“åã€å·¥èµ„ã€å‘˜å·¥`id`ã€‚

## `Map`æ¥å£å®ç°ç±»â€”â€”`HashMap`
### `HashMap`å°ç»“
1. `Map`æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼š`HashMap`ã€`Hashtable`å’Œ`Properties`ã€‚
2. `HashMap`æ˜¯`Map`æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»ã€‚
3. `HashMap`æ˜¯ä»¥`key-value`å¯¹çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®ï¼ˆ`HashMap$Node`ç±»å‹ï¼‰
4. `key`ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å€¼å¯ä»¥é‡å¤ï¼Œå…è®¸ä½¿ç”¨`null`é”®å’Œ`null`å€¼ã€‚
5. å¦‚æœæ·»åŠ ç›¸åŒçš„`key`ï¼Œåˆ™ä¼šè¦†ç›–åŸæ¥çš„`key-value`ï¼Œç­‰åŒäºä¿®æ”¹ã€‚ï¼ˆ`key`ä¸ä¼šæ›¿æ¢ï¼Œ`value`ä¼šæ›¿æ¢ï¼‰
6. ä¸`HashSet`ä¸€æ ·ï¼Œä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œå› ä¸ºåº•å±‚æ˜¯ä»¥`hash`è¡¨çš„æ–¹å¼æ¥å­˜å‚¨çš„ã€‚ï¼ˆ`JDK8`çš„`HashMap`åº•å±‚ï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰
7. `HashMap`æ²¡æœ‰å®ç°åŒæ­¥ï¼Œå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ–¹æ³•æ²¡æœ‰åšåŒæ­¥äº’æ–¥çš„æ“ä½œï¼Œæ²¡æœ‰`synchronized`ã€‚

### `HashMap`åº•å±‚æœºåˆ¶åŠæºç å‰–æ

<img src="/notes/img-ch14/map/Source.png">

* æ‰©å®¹æœºåˆ¶ï¼šå’Œ`HashSet`ç›¸åŒ

1. `HashMap`åº•å±‚ç»´æŠ¤äº†`Node`ç±»å‹çš„æ•°ç»„`table`ï¼Œé»˜è®¤ä¸º`null`
2. å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°†åŠ è½½å› å­ï¼ˆ`loadFactor`ï¼‰åˆå§‹åŒ–ä¸º0.75.
3. å½“æ·»åŠ `key-val`æ—¶ï¼Œé€šè¿‡`key`çš„å“ˆå¸Œå€¼å¾—åˆ°åœ¨`table`ç´¢å¼•ã€‚ç„¶ååˆ¤æ–­è¯¥ç´¢å¼•å¤„æ˜¯å¦æœ‰å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ ç›´æ¥æ·»åŠ ã€‚å¦‚æœè¯¥ç´¢å¼•å¤„æœ‰å…ƒç´ ï¼Œç»§ç»­åˆ¤æ–­è¯¥å…ƒç´ çš„`key`å’Œå‡†å¤‡åŠ å…¥çš„`key`æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™ç›´æ¥æ›¿æ¢valï¼›å¦‚æœä¸ç›¸ç­‰éœ€è¦åˆ¤æ–­æ˜¯æ ‘ç»“æ„è¿˜æ˜¯é“¾è¡¨ç»“æ„ï¼Œä½œå‡ºç›¸åº”å¤„ç†ã€‚å¦‚æœæ·»åŠ æ—¶å‘ç°å®¹é‡ä¸å¤Ÿï¼Œåˆ™éœ€è¦æ‰©å®¹ã€‚
4. ç¬¬1æ¬¡æ·»åŠ ï¼Œåˆ™éœ€è¦æ‰©å®¹`table`å®¹é‡ä¸º16ï¼Œä¸´ç•Œå€¼ï¼ˆ`threshold`ï¼‰ä¸º12ï¼ˆ16*0.75ï¼‰
5. ä»¥åå†æ‰©å®¹ï¼Œåˆ™éœ€è¦æ‰©å®¹tableå®¹é‡ä¸ºåŸæ¥çš„2å€ï¼ˆ32ï¼‰ï¼Œä¸´ç•Œå€¼ä¸ºåŸæ¥çš„2å€ï¼Œå³24ï¼Œä»¥æ­¤ç±»æ¨ã€‚
6. åœ¨`Java8`ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡`TREEIFY_THRESHOLD`ï¼ˆé»˜è®¤æ˜¯8ï¼‰ï¼Œå¹¶ä¸”`table`çš„å¤§å°>=`MIN_TREEIFY_CAPACITY`ï¼ˆé»˜è®¤64ï¼‰ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–ï¼ˆçº¢é»‘æ ‘ï¼‰

* æºç åˆ†æï¼š[HashMapSource1.java](/code/chapter14/src/com/jinjin/map_/HashMapSource1.java)
* æ¨¡æ‹Ÿ`HashMap`è§¦å‘æ‰©å®¹ã€æ ‘åŒ–æƒ…å†µï¼Œå¹¶DebugéªŒè¯ã€‚[HashMapSource2.java](/code/chapter14/src/com/jinjin/map_/HashMapSource2.java)

## `Map`æ¥å£å®ç°ç±»â€”`Hashtable`
### `Hashtable`çš„åŸºæœ¬ä»‹ç»
1. å­˜æ”¾çš„å…ƒç´ æ˜¯é”®å€¼å¯¹ï¼Œå³K-V
2. `Hashtable`çš„é”®å’Œå€¼éƒ½ä¸èƒ½ä¸º`null`ï¼Œå¦åˆ™ä¼šæ’é™¤`NullPointerException`
3. `Hashtable`ä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸Šå’Œ`HashMap`ä¸€æ ·
4. `Hashtable`æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆ`synchronized`ï¼‰ï¼Œ`HashMap`æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„

åº”ç”¨æ¡ˆä¾‹ï¼š[HashTableExercise.java](/code/chapter14/src/com/jinjin/map_/HashTableExercise.java)

### `Hashtable`å’Œ`HashMap`å¯¹æ¯”
||ç‰ˆæœ¬|çº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥ï¼‰|æ•ˆç‡|å…è®¸`null`é”®å’Œ`null`å€¼|
|----|----|----|----|----|
|`HashMap`|1.2|ä¸å®‰å…¨|é«˜|å¯ä»¥|
|`Hashtable`|1.0|å®‰å…¨|ä½|ä¸å¯ä»¥|

## `Map`æ¥å£å®ç°ç±»â€”â€”`Properties`
1. `Properties`ç±»ç»§æ‰¿è‡ª`Hashtable`ç±»å¹¶ä¸”å®ç°äº†`Map`æ¥å£ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä¸€ç§é”®å€¼å¯¹çš„å½¢å¼æ¥ä¿å­˜æ•°æ®ã€‚
2. å®ƒçš„ä½¿ç”¨ç‰¹ç‚¹å’Œ`Hashtable`ç±»ä¼¼
3. `Properties`è¿˜å¯ä»¥ç”¨äºä»`xxx.properties`æ–‡ä»¶ä¸­ï¼ŒåŠ è½½æ•°æ®åˆ°`Properties`ç±»å¯¹è±¡ï¼Œå¹¶è¿›è¡Œè¯»å–å’Œä¿®æ”¹
4. è¯´æ˜ï¼šå·¥ä½œå`xxx.properties`æ–‡ä»¶é€šå¸¸ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹åœ¨IOæµä¸­å†è¯¦ç»†è®²ã€‚

* åŸºæœ¬ä½¿ç”¨ï¼š[Properties_.java](/code/chapter14/src/com/jinjin/map_/Properties_.java)

## ğŸš©æ€»ç»“â€”â€”å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»

<img src="/notes/img-ch14/HowToChoose.png">

### `TreeSet`
[TreeSet_.java](/code/chapter14/src/com/jinjin/set_/TreeSet_.java)

1. æ„é€ å™¨æŠŠä¼ å…¥çš„æ¯”è¾ƒå™¨å¯¹è±¡ï¼Œèµ‹ç»™äº†`TreeSet`çš„åº•å±‚çš„`TreeMap`çš„å±æ€§`this.comparator`
```java
public TreeMap(Comparator<? super K> comparator) {
  this.comparator = comparator;
}
```
2. åœ¨è°ƒç”¨`treeSet.add("tom")`, åœ¨åº•å±‚ä¼šæ‰§è¡Œåˆ°
```java
if (cpr != null) {//cpr å°±æ˜¯æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)
  do {
      parent = t;
      //åŠ¨æ€ç»‘å®šåˆ°æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)compare
      cmp = cpr.compare(key, t.key);
      if (cmp < 0)
          t = t.left;
      else if (cmp > 0)
          t = t.right;
      else //å¦‚æœç›¸ç­‰ï¼Œå³è¿”å›0,è¿™ä¸ªKeyå°±æ²¡æœ‰åŠ å…¥
          return t.setValue(value);
  } while (t != null);
}
```
### `TreeMap`
[TreeMap_.java](/code/chapter14/src/com/jinjin/map_/TreeMap_.java)

1. æ„é€ å™¨. æŠŠä¼ å…¥çš„å®ç°äº†`Comparator`æ¥å£çš„åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ï¼Œä¼ ç»™ç»™`TreeMap`çš„`comparator`
```java
public TreeMap(Comparator<? super K> comparator) {
  this.comparator = comparator;
}
```
2. è°ƒç”¨`put`æ–¹æ³•
2.1 ç¬¬ä¸€æ¬¡æ·»åŠ , æŠŠ`k-v`å°è£…åˆ°`Entry`å¯¹è±¡ï¼Œæ”¾å…¥`root`
```java
Entry<K,V> t = root;
if (t == null) {
  compare(key, key); // type (and possibly null) check

  root = new Entry<>(key, value, null);
  size = 1;
  modCount++;
  return null;
}
```
2.2 ä»¥åæ·»åŠ 
```java
Comparator<? super K> cpr = comparator;
if (cpr != null) {
  do { //éå†æ‰€æœ‰çš„key , ç»™å½“å‰keyæ‰¾åˆ°é€‚å½“ä½ç½®
    parent = t;
    cmp = cpr.compare(key, t.key);//åŠ¨æ€ç»‘å®šåˆ°æˆ‘ä»¬çš„åŒ¿åå†…éƒ¨ç±»çš„compare
    if (cmp < 0)
      t = t.left;
    else if (cmp > 0)
      t = t.right;
    else  //å¦‚æœéå†è¿‡ç¨‹ä¸­ï¼Œå‘ç°å‡†å¤‡æ·»åŠ Key å’Œå½“å‰å·²æœ‰çš„Key ç›¸ç­‰ï¼Œå°±ä¸æ·»åŠ 
      return t.setValue(value);
  } while (t != null);
}
```
## `Collections`å·¥å…·ç±»
### `Collections`å·¥å…·ç±»ä»‹ç»
1. `Collections`æ˜¯ä¸€ä¸ªæ“ä½œ`Set`ã€Listå’ŒMapç­‰é›†åˆçš„å·¥å…·ç±»
2. `Collections`ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€çš„æ–¹æ³•å¯¹é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œ

### æ’åºæ“ä½œï¼ˆå‡ä¸º`static`æ–¹æ³•ï¼‰
1. `reverse(List)`ï¼šåè½¬`List`ä¸­å…ƒç´ çš„é¡ºåº
2. `shuffle(List)`ï¼šå¯¹`List`é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº
3. `sort(List)`ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š`List`é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº
4. `sort(Listï¼ŒComparator)`ï¼šæ ¹æ®æŒ‡å®šçš„`Comparator`äº§ç”Ÿçš„é¡ºåºå¯¹`List`é›†åˆå…ƒç´ è¿›è¡Œæ’åº
5. `swap(Listï¼Œintï¼Œ int)`ï¼šå°†æŒ‡å®š`List`é›†åˆä¸­çš„`i`å¤„å…ƒç´ å’Œ`j`å¤„å…ƒç´ è¿›è¡Œäº¤æ¢
6. `Object max(Collection)`ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ 
7. `Object max(Collectionï¼ŒComparator)`ï¼šæ ¹æ®`Comparator`æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ 
8. `Object min(Collection)`
9. `Object min(Collectionï¼ŒComparator)`
10. `int frequency(Collectionï¼ŒObject)`ï¼šè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°
11. `void copy(List dest,List src)`ï¼šå°†`src`ä¸­çš„å†…å®¹å¤åˆ¶åˆ°`dest`ä¸­
  * æ³¨æ„`dest`çš„å¤§å°ï¼Œå¦‚æœä¸åˆé€‚ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸
  ```java
  public static <T> void copy(List<? super T> dest, List<? extends T> src) {
    int srcSize = src.size();
    if (srcSize > dest.size())
        throw new IndexOutOfBoundsException("Source does not fit in dest");
  }
  ```
12. `boolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal)`ï¼šä½¿ç”¨æ–°å€¼æ›¿æ¢`List`å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼